# üöÄ Production Deployment - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞!

Backend —Ç–µ–ø–µ—Ä—å —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **SWC –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞**, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç **< 256 MB RAM** –≤–º–µ—Å—Ç–æ 1024 MB.

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

1. **docker-compose.yml** - Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Dockerfile.swc`
2. **docker-compose.override.yml ‚Üí docker-compose.dev.yml** - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –¥–ª—è —è–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. **docker-dev.sh** - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
4. **Backend —Å–±–æ—Ä–∫–∞** - –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SWC (–±—ã—Å—Ç—Ä–æ –∏ –º–∞–ª–æ –ø–∞–º—è—Ç–∏)

---

## üìã –®–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ:

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker-compose down
# –∏–ª–∏
docker stop $(docker ps -aq)
```

### 2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git pull origin production_fixes
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```bash
./docker-dev.sh prod
```

**–ò–ª–∏** –µ—Å–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ –≤ `start`:

```bash
./docker-dev.sh start
```

**–ò–ª–∏** –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ docker-compose:

```bash
docker-compose -f docker-compose.yml up -d --build
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
docker logs petanque-backend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./docker-dev.sh logs
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ª–æ–≥–∞—Ö backend:

```
> petanque-rating-backend@1.0.0 start
> node dist/server.js

üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

### –§–∞–π–ª docker-compose.dev.yml –±–æ–ª—å—à–µ –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

- **–î–ª—è production**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `./docker-dev.sh prod` –∏–ª–∏ `docker-compose -f docker-compose.yml up -d`
- **–î–ª—è development**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `./docker-dev.sh dev` (–ø—Ä–∏–º–µ–Ω–∏—Ç docker-compose.dev.yml)

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π "ts-node-dev: not found":

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–ª—Å—è dev –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª. –†–µ—à–µ–Ω–∏–µ:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ—Ç —Å—Ç–∞—Ä–æ–≥–æ override —Ñ–∞–π–ª–∞
ls docker-compose.override.yml
# –ï—Å–ª–∏ –µ—Å—Ç—å - –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –µ–≥–æ
mv docker-compose.override.yml docker-compose.dev.yml

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
docker-compose -f docker-compose.yml up -d --build
```

### Backend –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ:

SWC –¥–æ–ª–∂–µ–Ω —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É. –ù–æ –µ—Å–ª–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏:

```bash
# –î–æ–±–∞–≤—å—Ç–µ swap
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Å–±–æ—Ä–∫—É
docker-compose -f docker-compose.yml up -d --build
```

### –ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ backend:

```bash
docker build -f backend/Dockerfile.swc -t petanque-backend ./backend
docker-compose -f docker-compose.yml up -d backend
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏:

| –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä          | –¢—Ä–µ–±—É–µ—Ç—Å—è RAM | –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏  |
| ------------------- | ------------- | ------------- |
| TypeScript (—Å—Ç–∞—Ä—ã–π) | 1024+ MB      | ~60 —Å–µ–∫—É–Ω–¥    |
| **SWC (–Ω–æ–≤—ã–π)**     | **< 256 MB**  | **~5 —Å–µ–∫—É–Ω–¥** |

---

## üéØ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ó–∞–ø—É—Å–∫ production
./docker-dev.sh prod

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
./docker-dev.sh stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./docker-dev.sh restart

# –õ–æ–≥–∏
./docker-dev.sh logs backend

# –°—Ç–∞—Ç—É—Å
docker ps
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- **backend/QUICKSTART_BUILD.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø–æ —Å–±–æ—Ä–∫–µ
- **backend/BUILD_OPTIONS.md** - –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **build-backend.sh** - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ backend

---

‚úÖ **–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö —Å 512 MB RAM!**
